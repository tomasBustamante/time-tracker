<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item"><%= link_to 'Proyectos', proyectos_path %></li>
    <li class="breadcrumb-item active" aria-current="page"><%= @proyecto.nombre %></li>
  </ol>
</nav>

<h2>Detalles del proyecto</h2><hr>
<p>
  <strong>Nombre:</strong>
  <%= @proyecto.nombre %>
</p>

<p>
  <strong>Descripción:</strong>
  <%= @proyecto.descripcion %>
</p>

<hr>

<h3>Requerimientos</h3>

<p>
  <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#nuevoRequerimiento" aria-expanded="false" aria-controls="nuevoRequerimiento">
    Nuevo requerimiento
  </button>
</p>

<div class="collapse" id="nuevoRequerimiento">
  <div class="card card-body">
    <h3>Agregar requerimiento</h3>
    <%= form_with(model: [ @proyecto, @proyecto.requerimientos.build ], local: true) do |form| %>
      <div class="form-group">
        <%= form.label :nombre %><br>
        <%= form.text_field :nombre, :class => "form-control"  %>
      </div>
      <div class="form-group">
        <%= form.label :descripcion  %><br>
        <%= form.text_area :descripcion, :class => "form-control"  %>
      </div>
      <p>
        <%= form.submit %>
      </p>
    <% end %>
  </div>
</div>

<p>
  <table class="table table-hover">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Descripción</th>
        <th scope="col">Mostrar</th>
        <th scope="col">Editar</th>
        <th scope="col">Eliminar</th>
      </tr>
    </thead>
    <tbody>
    <% @proyecto.requerimientos.each do |requerimiento| %>
      <tr>
        <td><%= requerimiento.nombre %></td>
        <td><%= requerimiento.descripcion %></td>
        <td><%= link_to 'Mostrar', proyecto_path(@proyecto),
                :class => "btn btn-secondary btn-sm" %></td>
        <td><%= link_to 'Editar',  edit_proyecto_requerimiento_path(:proyecto_id => @proyecto.id),
                :class => "btn btn-secondary btn-sm" %></td>
        <td><%= link_to 'Eliminar', proyecto_path(@proyecto),
                :class => "btn btn-secondary btn-sm",
                method: :delete,
                data: { confirm: '¿Estás seguro?' } %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</p>
<hr>

<%= link_to 'Editar proyecto', edit_proyecto_path(@proyecto),
    :class => "btn btn-secondary btn-sm" %>
<%= link_to 'Atrás', proyectos_path,
    :class => "btn btn-secondary btn-sm" %>
